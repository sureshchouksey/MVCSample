<!DOCTYPE html>
<html>
<head>
    <title>RPC Json Calls</title>
    
    <link href="Css/Reset.css" rel="stylesheet" type="text/css" />
    <link href="Css/Standard.css" rel="stylesheet" type="text/css" />
    <script src="scripts/jquery.min.js" type="text/javascript"></script>
</head>
<body>
    <h1>RPC Json Calls</h1>

    <div class="contentcontainer">
        <h3>Albums loaded via jsonP:</h3>
        <hr />
        <div id="divAlbumList" >
            
        </div>

        <script type="text/javascript">
            $(document).ready(function () {

                //var data = album;
                //                var data =
                //                {
                //                    album: album,
                //                    userToken: "blah"
                //                }

var album = {
    AlbumName: "PowerAge",
    Entered: "1/1/1977"
}
var user = {
    Name: "Rick"
}
var userToken = "sekkritt";


$.ajax(
{
    url: "samples/PostAlbum",
    type: "POST",
    contentType: "application/json",
    data: JSON.stringify({ Album: album, User: user, UserToken: userToken }),
    //  data: { AlbumName: "Dirty Deeds", Entered: "5/1/2012" },
    //  processData: false,
    //    beforeSend: function (xhr) {
    //        // not required since JSON is default output
    //        xhr.setRequestHeader("Accept", "application/json");
    //    },
    success: function (result) {
        // reload list of albums
        alert(result);
    },
    error: function (xhr, status, p3, p4) {
        var err = "Error" + status + p3;
        if (xhr.responseText && xhr.responseText[0] == "{")
            err = JSON.parse(xhr.responseText).message;
        alert(err);
    }
});
            });
        </script>
    
    </div>
</body>
</html>
