(function(n){var t,f,e,u,o,i,r;HttpClient=function(t){var i=this;this.completed=null,this.errorHandler=null,this.errorMessage="",this.async=!0,this.evalResult=!1,this.contentType="application/x-www-form-urlencoded",this.accepts=null,this.method="GET",this.timeout=2e4,this.headers={},n.extend(i,t),this.appendHeader=function(n,t){i.headers[n]=t},this.send=function(t,r,u,f){u=u||i.completed,f=f||i.errorHandler,n.ajax({url:t,data:r,type:r?"POST":i.method,processData:!1,contentType:i.contentType,timeout:i.timeout,dataType:"text",global:!1,async:i.async,beforeSend:function(n){for(var t in i.headers)n.setRequestHeader(t,i.headers[t]);i.accepts&&n.setRequestHeader("Accept",i.accepts)},success:function(n){var r=null;if(i.evalResult)try{n=JSON.parseWithDate(n),n&&n.hasOwnProperty("d")&&(n=n.d)}catch(e){r=new CallbackException(e)}if(r||n&&(n.isCallbackError||n.iscallbackerror)){n&&(r=n),f&&f(r,i);return}u&&u(n,i)},error:function(n,t){var r=null,u;n.readyState==4&&(u=n.responseText,u&&u.charAt(0)=="{"&&(r=JSON.parseWithDate(u)),r||(r=n.status&&n.status!=200?new CallbackException(n.status+" "+n.statusText):new CallbackException("Callback Error: "+t),r.detail=u)),r||(r=new CallbackException("Callback Error: "+t)),f&&f(r,i,n)}})},this.returnError=function(n){var t=new CallbackException(n);i.errorHandler&&i.errorHandler(t,i)}},ServiceProxy=function(t){var i=this;this.isWcf=!0,this.timeout=2e4,this.method="POST",this.serviceUrl=t,typeof t=="object"&&n.extend(this,t),this.invoke=function(n,t,r,u){var s=null,o,e;i.method!="GET"&&(s=i.isWcf?JSON.stringifyWcf(t):JSON.stringify(t)),o=i.serviceUrl+n,e=new HttpClient({contentType:"application/json",accepts:"application/json,text/*",method:i.method,evalResult:!0,timeout:i.timeout}),e.send(o,s,r,u)}},AjaxMethodCallback=function(t,i,r){var u=this;this.controlId=t,this.postbackMode="PostMethodParametersOnly",this.serverUrl=i,this.formName=null,this.resultMode="json",this.timeout=2e4,this.completed=null,this.errorHandler=null,n.extend(this,r),this.Http=null,this.callMethod=function(t,i,r,f){var h,e,s,o,c;if(u.completed=r,u.errorHandler=f,h=new HttpClient({timeout:u.timeout,evalResult:!0,accepts:"application/json,text/*"}),u.Http=h,e={},u.resultMode=="msajax")e=JSON.stringifyWithDates(i);else{if(s=0,i.length)for(s=i.length,o=0;o<s;o++)e["Parm"+(o+1).toString()]=JSON.stringify(i[o]);n.extend(e,{CallbackMethod:t,CallbackParmCount:s,__WWEVENTCALLBACK:u.controlId}),e=n.param(e)+"&"}if(c=u.formName||document.forms.length>0?document.forms[0].id:"",u.postbackMode=="Post")e+=n("#"+c).serialize();else if(u.postbackMode=="PostNoViewstate")e+=n("#"+c).serializeNoViewState();else if(this.postbackMode=="Get")return Url=this.serverUrl,Url+=Url.indexOf("?")>-1?e:"?"+e,h.send(Url,null,u.onHttpCallback,u.onHttpCallback);return h.send(this.serverUrl,e,u.onHttpCallback,u.onHttpCallback)},this.onHttpCallback=function(n){if(n&&(n.isCallbackError||n.iscallbackerror)){u.errorHandler&&u.errorHandler(n,u);return}u.completed!=null&&u.completed(n,u)}},ajaxJson=function(t,i,r,u,f){var s=i,e={method:"POST",contentType:"application/json",noPostEncoding:!1},o;n.extend(e,f),o=new HttpClient(e),o.evalResult=!0,e.noPostEncoding||e.method!="POST"||(s=JSON.stringify(i)),o.send(t,s,r,u)},ajaxCallMethod=function(n,t,i,r,u,f){var e=new AjaxMethodCallback(null,n,f);e.callMethod(t,i,r,u)},n.postJSON=function(t,i,r,u,f){var o={method:"POST",evalResult:!0},e;n.extend(o,f),e=new HttpClient(o),typeof i=="object"&&(i=n.param(i)),e.send(t,i,r,u)},onPageError=function(n){showStatus(n.message||n.Message,6e3,!0)},CallbackException=function(n,t){this.isCallbackError=!0,typeof n=="object"?n.message?this.message=n.message:n.Message&&(this.message=n.Message):this.message=n,this.detail=t?t:null},StatusBar=function(t,i){var r=this,u=null;r.elementId="_showstatus",r.prependMultiline=!0,r.closable=!1,r.afterTimeoutText=null,r.autoClose=!1,r.noEffects=!1,r.effectSpeed=500,r.cssClass="statusbar",r.highlightClass="statusbarhighlight",r.closeButtonClass="statusbarclose",r.additive=!1,r.interval=0,t&&(u=n(t)),i&&n.extend(this,i),u||(u=n("<div id='_statusbar' class='"+r.cssClass+"'><div class='"+r.closeButtonClass+"'>"+(r.closable?" X </div></div>":"")).appendTo(document.body).hide()),r.closeable&&n("."+r.cssClass).click(function(){r.hide()}),this.show=function(t,i,f){var s,o;return t=="hide"?r.hide():(f===!0&&u.addClass(r.highlightClass),r.additive?(s=n("<div style='margin-bottom: 2px;'>"+t+"</div>"),r.prependMultiline?u.prepend(s):u.append(s)):r.closable?(o=u.find("div.statusbarclose"),u.text(t).prepend(o),o.click(r.hide)):u.text(t),u.is(":visible")||r.noEffects?u.show():u.slideDown(r.effectSpeed),u.maxZIndex(),i&&(r.interval!=0&&clearInterval(r.interval),r.interval=setTimeout(function(){r.interval=0,u.removeClass(r.highlightClass),r.afterTimeoutText?r.show(r.afterTimeoutText):r.autoClose&&r.hide()},i)),r)},this.hide=function(){return r.noEffects?u.hide():u.slideUp(r.effectSpeed),u.removeClass(r.highlightClass),r},this.release=function(){u&&n(u).remove()}},t=null,showStatus=function(n,i,r,u){if(typeof n=="object"){t&&t.release(),t=new StatusBar(null,n);return}t||(t=new StatusBar),t.show(n,i,r,u)},n.fn.centerInClient=function(t){var i={forceAbsolute:!1,container:window,completed:null,centerOnceOnly:!1};return n.extend(i,t),this.each(function(){var r=n(this),u,o,s;if(i.centerOnceOnly){if(r.data("_centerOnce"))return;r.data("_centerOnce",!0)}else r.data("_centerOnce",null);u=n(i.container),o=i.container==window,i.forceAbsolute&&(o?r.remove().appendTo("body"):r.remove().appendTo(u[0])),r.css("position","absolute");var h=2.2,f=(o?u.width():u.outerWidth())/2-r.outerWidth()/2,e=(o?u.height():u.outerHeight())/h-r.outerHeight()/2;f=f+u.scrollLeft(),e=e+u.scrollTop(),e=e<5?5:e,f=f<5?5:f,r.css({left:f,top:e}),s=r.css("zIndex"),s&&s!="auto"||r.css("zIndex",1),i.completed&&i.completed(this)})},sumDimensions=function(n){for(var r=0,i=1;i<arguments.length;i++)r+=Math.max(parseInt(n.css(arguments[i]),10)||0,0);return r},n.fn.makeAbsolute=function(t){return this.each(function(){var i=n(this),r=i.position();i.css({position:"absolute",marginLeft:0,marginTop:0,top:r.top,left:r.left}),t&&i.remove().appendTo("body")})},n.fn.stretchToBottom=function(t){var i={container:n(window),bottomOffset:0,autoResize:!1};return t&&t.length?i.container=t:n.extend(i,t),i.autoResize==!0&&($els=this,n(i.container).resize(function(){console.log(i.container),$els.stretchToBottom({container:i.container,autoResize:!1})})),this.each(function(){var e,t;$el=n(this),e=$el.css("position"),$el.makeAbsolute();var r=i.container,f=n(window).innerHeight(),o=parseInt($el.css("top")),u=0;r[0]!=window?(t=sumDimensions(r,"borderTopWidth","borderBottomWidth","paddingBottom","paddingTop")+sumDimensions($el,"borderTopWidth","borderBottomWidth","marginBottom","marginTop","paddingBottom","paddingTop"),t=t?t:1,f=r.offset().top+r.outerHeight(),u=f-o-Math.ceil(t)-i.bottomOffset):(t=sumDimensions($el,"borderTopWidth","borderBottomWidth","marginBottom","marginTop"),u=f-o-Math.ceil(t)-i.bottomOffset),$el.css("position",e).css("height",u)})},n.fn.moveToMousePosition=function(t,i){var r={left:0,top:0};return n.extend(r,i),this.each(function(){var i=n(this);i.css({left:t.pageX+r.left,top:t.pageY+r.top,position:"absolute"})})},n.fn.shadow=function(t,i){typeof t=="object"&&(i=t);var u={offset:5,color:"#636363",opacity:.45,callback:null,zIndex:100};return n.extend(u,i),this.each(function(){var i=n(this),f=this,c=i.get(0).id,r=n("#"+c+"Shadow"),h,s,l,e,o;if(typeof t=="string"){(t=="hide"||t=="remove")&&(typeof f.style.boxShadow=="string"?i.css("box-shadow",""):typeof f.style.MozBoxShadow=="string"?i.css("-moz-box-shadow",""):typeof f.style.WebkitBoxShadow=="string"?i.css("-webkit-box-shadow",""):(i.unwatch("_shadowMove"),r.remove()));return}if(r.length<1&&i.makeAbsolute(),typeof f.style.boxShadow=="string"){i.css("box-shadow",String.format("{0}px {0}px {0}px {1}",u.offset,u.color));return}if(typeof f.style.MozBoxShadow=="string"){i.css("-moz-box-shadow",String.format("{0}px {0}px {0}px {1}",u.offset,u.color));return}if(typeof f.style.WebkitBoxShadow=="string"){i.css("-webkit-box-shadow",String.format("{0}px {0}px {0}px {1}",u.offset,u.color));return}h=!0,r.length<1&&(r=n("<div>"),r.css({height:1,width:1}).attr("id",c+"Shadow").insertAfter(i),s=i.css("zIndex"),s&&s!="auto"||(i.css("zIndex",u.zIndex),r.css("zIndex",u.zIndex-1)),l=r.get(0),h=!1),e=i.is(":visible"),e||i.show(),o=i.position(),r.show().css({position:"absolute",width:i.outerWidth(),height:i.outerHeight(),opacity:u.opacity,background:u.color,left:o.left+u.offset-4,top:o.top+u.offset-2}),r.css("filter","progid:DXImageTransform.Microsoft.Blur(makeShadow=true, pixelradius=3, shadowOpacity="+u.opacity.toString()+")"),e||(r.hide(),i.hide()),zIndex=i.css("zIndex"),zIndex&&zIndex!="auto"?r.css("zIndex",zIndex-1):(i.css("zIndex",u.zIndex),r.css("zIndex",u.zIndex-1)),h||i.watch("left,top,width,height,display,opacity,zIndex",function(){if(i.is(":visible")){var f=i.position();r.css({position:"absolute",opacity:i.css("opacity")*u.opacity,width:i.outerWidth(),height:i.outerHeight(),opacity:u.opacity,background:u.color,left:f.left+u.offset-4,top:f.top+u.offset-2})}else r.hide()},100,"_shadowMove"),u.callback&&u.callback(r)}),this},n.fn.tooltip=function(t,i,r){function f(t,i){var u=this,e=n(t),f,r;this.cssClass="",this.onRelease=null,n.extend(u,i),f=e.get(0),r=n("#"+f.id+"_tt"),this.show=function(t,o,s){r.length>0&&r.remove(),r=n("<div>").attr("id",f.id+"_tt"),n(document.body).append(r),r.css({position:"absolute",display:"none",zIndex:1e3}),u.cssClass?r.addClass(u.cssClass):r.css({background:"cornsilk",border:"solid 1px gray",fontSize:"8pt",padding:2}),s?r.html(t):r.text(t);var c=e.position(),l=c.left+5,a=c.top+e.outerHeight()-1,h=r.width();h>400&&(h=400),r.css({left:l,top:a,width:h}),r.show(),r.shadow({offset:i.shadowOffset}),o&&o>0&&setTimeout(function(){u.onRelease&&u.onRelease.call(f,u),u.hide()},o)},this.hide=function(){r.length>0&&r.fadeOut("slow",function(){r.shadow("hide")})}}var u={cssClass:"",isHtml:!1,shadowOffset:2,onRelease:null};return n.extend(u,r),this.each(function(){var n=new f(this,u);if(t=="hide"){n.hide();return}n.show(t,i,u.isHtml)})},n.fn.watch=function(t,i,r,u){function f(t,i,u){t.each(function(){var t=n(this);typeof t.get(0).onpropertychange=="object"?t.bind("propertychange."+i,u.fnc):n.browser.mozilla?t.bind("DOMAttrModified."+i,u.fnc):u.intervalId=setInterval(u.fnc,r)})}function e(t){var u=n(this),i=u.data(t),s,e,r,o;if(i&&(s=this,i.func)){for(u.unwatch(t),e=!1,r=0,r;r<i.props.length;r++)if(o=u.css(i.props[r]),i.vals[r]!=o){i.vals[r]=o,e=!0;break}e&&i.func.call(s,i,r),f(u,t,i)}}return r||(r=100),u||(u="_watcher"),this.each(function(){var h=this,s=n(this),c=function(){e.call(h,u)},o={id:u,props:t.split(","),vals:[t.split(",").length],func:i,fnc:c,origProps:t,interval:r,intervalId:null};n.each(o.props,function(n){o.vals[n]=s.css(o.props[n])}),s.data(u,o),f(s,u,o)})},n.fn.unwatch=function(t){return this.each(function(){var r=n(this),i=r.data(t);try{typeof this.onpropertychange=="object"?r.unbind("propertychange."+t,i.fnc):n.browser.mozilla?r.unbind("DOMAttrModified."+t,i.fnc):clearInterval(i.intervalId)}catch(u){}}),this},n.fn.listSetData=function(t,i){var r={noClear:!1,dataValueField:null,dataTextField:null};return n.extend(r,i),this.each(function(){var u=n(this),f,i;if(t==null){u.children().remove();return}for(r.noClear||u.children().remove(),t.Rows?t=t.Rows:t.rows&&(t=t.rows),f=!1,r.dataTextField||r.dataValueField||(f=!0),x=0;x<t.length;x++)i=t[x],f?u.listAddItem(i,i):u.listAddItem(i[r.dataTextField],i[r.dataValueField])})},n.fn.listAddItem=function(t,i){return this.each(function(){n(this).append(n("<option></option>").attr("value",i).text(t))})},n.fn.listSelectItem=function(n){var i,t;if(!(this.length<1)&&(i=this.get(0),i.options)){for(t=i.options.length-1;t>-1;t--)if(i.options[t].value==n){i.options[t].selected=!0;return}return this}},n.fn.listGetSelections=function(n){var r=this.find("option:selected"),t,i;if(n)return r.length>0?t.eq(0).val():null;for(t=[],i=0;i<r.length;i++)t.push(r.eq(i).val());return t},HoverPanel=function(t,i){var r=this,u=n(t),f=u.get(0),s=-1,o=0,e=0;this.serverUrl="",this.timeout=2e4,this.controlId=f.id,this.htmlTargetId=f.id,this.queryString="",this.eventHandlerMode="ShowHtmlAtMousePosition",this.postbackMode="Get",this.completed=null,this.errorHandler=null,this.hoverOffsetRight=0,this.hoverOffsetBottom=0,this.panelOpacity=1,this.shadowOffset=0,this.shadowOpacity=.25,this.adjustWindowPosition=!0,this.formName="",this.navigateDelay=0,this.http=null,n.extend(r,i),this.startCallback=function(t,i,u,f){var o,e;try{if(o=+new Date,r.busy=o,e=this.serverUrl,t?(r.lastMouseTop=t.clientY,r.lastMouseLeft=t.clientX):r.lastMouseTop=0,r.queryString=i==null?i="":i,f&&(r.errorHandler=f),i?i+="&":i="",i+="__WWEVENTCALLBACK="+r.controlId,r.formName=r.formName||document.forms[0],r.http=new HttpClient,r.timeout=r.timeout,r.http.appendHeader("RequestKey",o),u?u+="&":u="",r.postbackMode=="Post"?u+=n(r.formName).serialize():this.postbackMode=="PostNoViewstate"?u+=n(r.formName).serializeNoViewState():this.postbackMode=="Get"&&u&&(i+=u),i!=""&&(e=e.indexOf("?")>-1?e+"&"+i:e+"?"+i),r.eventHandlerMode=="ShowIFrameAtMousePosition"||r.eventHandlerMode=="ShowIFrameInPanel"){setTimeout(function(){r.busy&&r.showIFrame.call(r,e)},r.navigateDelay);return}setTimeout(function(){r.busy==o&&r.http.send.call(r,e,u,r.onHttpCallback,r.onHttpCallback)},r.navigateDelay)}catch(t){r.onHttpCallback(new CallbackException(t.message))}},this.onHttpCallback=function(n){if(r.busy=-1,r.http&&r.http.status&&r.http.status!=200&&(n=new CallbackException(http.statusText)),n==null&&(n=new CallbackException("No output was returned.")),n.isCallbackError){r.errorHandler&&r.errorHandler(n);return}r.displayResult(n)},this.displayResult=function(n){r.completed&&r.completed(n,r)==!1||(r.eventHandlerMode=="ShowHtmlAtMousePosition"?(r.assignContent(n),r.movePanelToPosition(r.lastMouseLeft+r.hoverOffsetRight,r.lastMouseTop+r.hoverOffsetBottom),r.show()):r.eventHandlerMode=="ShowHtmlInPanel"&&(r.assignContent(n),r.show()))},this.assignContent=function(t){n("#"+r.htmlTargetId).html(t)},this.movePanelToPosition=function(t,i){var f;try{if(u.css("position","absolute"),typeof t=="object"?(r.lastMouseTop=t.clientY,r.lastMouseLeft=t.clientX):typeof t=="number"&&(r.lastMouseTop=i,r.lastMouseLeft=t),t=r.lastMouseLeft+3,i=r.lastMouseTop+3,f=n(window),u.css({left:t+f.scrollLeft(),top:i+f.scrollTop()}),r.adjustWindowPosition&&document.body){var s=f.height(),h=u.outerHeight(),e=f.width(),o=u.outerWidth();s<h?i=0:s<r.lastMouseTop+h&&(i=s-h-10),e<o?t=0:e<r.lastMouseLeft+o&&(t=e-o-25),u.css({left:t+f.scrollLeft(),top:i+f.scrollTop()})}}catch(c){window.status="Moving of window failed: "+c.message}},this.showIFrame=function(t){r.busy=!1,t=t?t:r.serverUrl,n("#"+r.controlId+"_IFrame").attr("src",t).load(r.completed),r.show(),r.eventHandlerMode=="ShowIFrameAtMousePosition"&&r.movePanelToPosition(r.lastMouseLeft+r.hoverOffsetRight,r.lastMouseTop+r.hoverOffsetBottom)},this.hide=function(){this.abort(),u.hide()},this.abort=function(){r.busy=-1},this.show=function(){u.show().css("opacity",r.panelOpacity),r.shadowOffset&&u.shadow({offset:r.shadowOffset,opacity:r.shadowOpacity})}},_ModalDialog=function(t,i){var r=this,u=n(t),f;(u.length<1&&(u=n("#"+t)),u.length<1)||(this.overlayId="_ModalOverlay",this.contentId=u.get(0).id,this.headerId="",this.backgroundOpacity=.75,this.fadeInBackground=!1,this.zIndex=0,this.jOverlay=null,this.keepCentered=!0,this.dialogHandler=null,n.extend(r,i),f=null,this.show=function(t,i,e){var s,o;r.contentId&&typeof t=="string"&&(e?n("#"+r.contentId).html(t):n("#"+r.contentId).text(t)),r.headerId&&typeof i=="string"&&(e?n("#"+r.headerId).html(i):n("#"+r.headerId).text(i)),s=r.zIndex>0?r.zIndex:n.maxZIndex(),u.css({zIndex:r.zIndex+2}).show().centerInClient(),o=opaqueOverlay({zIndex:r.zIndex+1,sel:"#"+r.overlayId,opacity:r.backgroundOpacity}),r.zIndex++,r.fadeInBackground&&o.hide().fadeIn("slow"),u.click(r.callback),r.keepCentered&&n(window).bind("resize.modal",function(){u.centerInClient()}).bind("scroll.modal",function(){u.centerInClient()}),n.browser.msie&&n.browser.version<"7"&&(f=n("select:visible").not(n(u).find("select")).hide())},this.hide=function(){u.hide(),r.keepCentered&&n(window).unbind("resize.modal").unbind("scroll.modal"),opaqueOverlay("hide",{sel:"#"+r.overlayId}),u.unbind("click"),f&&(f.show(),f=null)},this.callback=function(t){if(n(t.target).is(":button,a")){if(r.dialogHandler){if(r.dialogHandler.call(t.target,t,r)==!1)return;setTimeout(function(){r.hide()},10);return}setTimeout(function(){r.hide()},10)}})},n.fn.modalDialog=function(t,i,r,u){if(this.length<1)return this;var s=this.get(0),o=n(s),h="modal"+s.id,e=o.data(h);return(e||(e=new _ModalDialog(o,t)),typeof t=="string")?((t=="hide"||t=="close")&&e.hide(),t=="instance"||t=="get")?e:void 0:(e.show(i,r,u),o.data(h,e),this)},n.modalDialog=function(t,i,r,u,f){var o=n("#_MBOX"),l,c,s,e,h;if(o.length<1){for(o=n("<div>").addClass("dialog dragwindow").attr("id","_MBOX").css({width:400}),l=n("<div>").addClass("dialog-header").attr("id","_MBOXHEADER"),c=n("<div>").addClass("dialog-content").attr("id","_MBOXCONTENT"),o.append(l).append(c),s=n("<div>").css("margin","0px 15px 15px"),r||(r=[" Close "]),e=0;e<r.length;e++)h=n("<input type='button' />").attr("id","_BTN_"+e).css("margin-right","5px").val(r[e]),s.append(h);o.append(s).appendTo(document.body)}u||(u=function(){return this.id.substr(0,5)=="_BTN_"||n(this).hasClass("closebox")?!0:!1}),o.modalDialog({dialogHandler:u,headerId:"_MBOXHEADER",contentId:"_MBOXCONTENT"},t,i,f).draggable({handle:n("#_MBOX .dialog-header")}).shadow().closable({closeHandler:function(){var t=!0;u&&(t=u.call(this)),t&&n("#_MBOX").modalDialog("hide")}})},opaqueOverlay=function(t,i){var e=this,u=n(window),r,f;if(this.sel="#_ShadowOverlay",this.opacity=.75,this.zIndex=1e4,n.extend(this,i||t),r=n(sel),t=="hide"){if(r.length<1)return;r.hide(),r.get(0).opaqueOverlay=!1,u.unbind("resize.opaque").unbind("scroll.opaque");return}return r.length<1&&(r=n("<div>").attr("id",this.sel.substr(1)).css("background","black").appendTo(document.body)),f=r.get(0),r.show(),f.opaqueOverlay||u.bind("resize.opaque",function(){opaqueOverlay(t)}).bind("scroll.opaque",function(){opaqueOverlay(t)}),f.opaqueOverlay=!0,r.css({top:0+u.scrollTop(),left:0+u.scrollLeft(),position:"absolute",opacity:e.opacity,zIndex:e.zIndex}).width(u.width()).height(u.height()),r},n.fn.draggable||(n.fn.draggable=function(t){return this.each(function(){var r=n(this),i=r.data("draggable");if(typeof t=="string"){i&&t=="remove"&&(i.stopDragging(),r.removeData("draggable"));return}i||(i=new DragBehavior(this,t),r.data("draggable",i))})},f=1,DragBehavior=function(t,i){var r=this,u=n(t),o;this.handle="",this.opacity=.75,this.start=null,this.stop=null,this.dragDelay=100,this.forceAbsolute=!1,n.extend(r,i),r.handle=r.handle?n(r.handle,u):u,r.handle.length<1&&(r.handle=u);var e=!1,s=!1,v=0,y=-1,l=0,h=0,c=1,a=0;this.mouseDown=function(t){var f=r.handle.get(0),o=!1,i;(n(t.target).parents().each(function(){this==f&&(o=!0)}),e||t.target!=f&&!o||n(t.target).is(".closebox,input,textara,a"))||(e=!0,s=!1,i=r.handle.offset(),l=t.pageX-i.left,h=t.pageY-i.top,setTimeout(function(){e&&(u.show().makeAbsolute(r.forceAbsolute),r.dragActivate(t))},r.dragDelay))},o=function(n){n.stopPropagation(),n.preventDefault()},this.dragActivate=function(t){e&&(s=!0,r.moveToMouse(t),e=!0,a=u.css("zIndex"),u.css("zIndex",15e4),c=u.css("opacity"),u.css({opacity:r.opacity,cursor:"move"}),n(document).bind("mousemove.dbh",r.mouseMove),n(document).bind("selectstart.dbh",o),n(document).bind("dragstart.dbh",o),n(document.body).bind("dragstart.dbh",o),n(document.body).bind("selectstart.dbh",o),r.handle.bind("selectstart.dbh",o),r.start&&r.start(t,r))},this.dragDeactivate=function(t,i){e&&(e=!1,s)&&(s=!1,i||r.moveToMouse(t),n(document).unbind("mousemove.dbh"),n(document).unbind("selectstart.dbh"),n(document).unbind("dragstart.dbh"),n(document.body).unbind("dragstart.dbh"),n(document.body).unbind("selectstart.dbh"),r.handle.unbind("selectstart.dbh"),i||(f+=10,u.css({zIndex:1e4+f,cursor:"auto"}),u.css("opacity",c),r.stop&&r.stop(t,r)))},this.mouseUp=function(n){r.dragDeactivate(n)},this.mouseMove=function(n){e&&r.moveToMouse(n)},this.moveToMouse=function(n){u.css({left:n.pageX-l,top:n.pageY-h})},this.stopDragging=function(){s&&(r.dragDeactivate(null,!0),n(document).unbind("mousedown",r.mouseDown))},n(document).mousedown(r.mouseDown),n(document).mouseup(r.mouseUp)}),n.fn.closable=function(t){var i={handle:null,closeHandler:null,cssClass:"closebox",imageUrl:null,fadeOut:null};return n.extend(i,t),this.each(function(){var u=n(this),e=u.css("position");e&&e!="static"||u.css("position","relative");var o=i.handle?n(i.handle).css({position:"relative"}):u,r=u.find("."+i.cssClass),f=!0;r.length<1&&(r=i.imageUrl?n("<img />").attr("src",i.imageUrl).css("cursor","pointer"):n("<div></div>"),r.addClass(i.cssClass),f=!1),r.click(function(t){(!i.closeHandler||i.closeHandler.call(this,t))&&(i.fadeOut?n(u).fadeOut(i.fadeOut):n(u).hide())}),i.imageUrl&&r.css("background-image","none"),f||o.append(r)})},n.fn.contentEditable=function(t){if(!(this.length<1)){var r="0px",i={editClass:null,saveText:"Save",saveHandler:null};return n.extend(i,t),this.each(function(){var t=n(this),u,f;return this.contentEditable=="true"?this:(u=n("<input type='button' value='"+i.saveText+"' class='editablebutton' style='display: block;'/>"),f=function(){i.editClass?t.removeClass(i.editClass):t.css({background:"transparent",padding:r}),t.get(0).contentEditable=!1,u.remove()},u.click(function(n){i.saveHandler.call(t.get(0),n)&&f()}),t.keypress(function(n){n.keyCode==27&&f()}),t.after(u).css("margin",2),this.contentEditable=!0,i.editClass?t.addClass(i.editClass):(r=t.css("padding"),t.css({background:"lavender",padding:10})),this)}),this}},n.fn.editable=function(t){if(this.length<1)return this;var r="0px",i={editClass:null,saveText:"Save",editMode:"text",saveHandler:null,value:null};return n.extend(i,t),this.each(function(){var r=n(this),f,u;return t=="cleanup"?(r.data("cleanupEditor")(),this):r.data("editing")?this:(f=n("<input type='button' />").addClass("editablebutton").css({display:"block"}).val(i.saveText),u=n("<textarea id='_contenteditor'></textarea>").css({fontFamily:r.css("font-family"),minHeight:"18px"}),i.value?u.val(i.value):u.val(i.editMode=="text"?r.text():jContext.html()),i.editClass?u.addClass(i.editClass):u.width(r.width()-10).height(r.height()),u.focus().hide().fadeIn("slow").data("editing",r.get(0)).insertBefore(r).keypress(function(n){n.keyCode==27&&cleanupEditor()}),r.data("editing",!0).hide(),r.data("cleanupEditor",function(){u.remove(),f.remove(),r.data("editing",!1).data("cleanupEditor",null).fadeIn("slow")}),f.click(function(){var t={text:u.val(),cleanup:r.data("cleanupEditor"),button:f,edit:u,content:r};i.saveHandler.call(u.get(0),t)&&cleanupEditor()}),u.after(f).css("margin",2),this)}),this},n.maxZIndex=n.fn.maxZIndex=function(t){var r={inc:10,group:"*"},i;return(n.extend(r,t),i=0,n(r.group).each(function(){var t=parseInt(n(this).css("z-index"));i=t>i?t:i}),!this.jquery)?i:this.each(function(){i+=r.inc,n(this).css("z-index",i)})},e={},parseTemplate=function(n,t){var u="",i,r;try{return i=e[n],i||(r="var p=[];with(obj){p.push('"+n.replace(/[\r\t\n]/g," ").replace(/'(?=[^#]*#>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<#=(.+?)#>/g,"',$1,'").split("<#").join("');").split("#>").join("p.push('")+"');}return p.join('');",i=new Function("obj",r),e[n]=i),i(t)}catch(f){u=f.message}return"< # ERROR: "+u.htmlEncode()+" # >"},$$=function(t,i){var r=n("#"+t,i);return r.length<1&&(r=n("[id$=_"+t+"],[id*=["+t+"_]",i)),r},String.prototype.htmlEncode=function(){var n=document.createElement("div");return typeof n.textContent=="string"?n.textContent=this.toString():n.innerText=this.toString(),n.innerHTML},String.prototype.trimEnd=function(n){return n?this.replace(new RegExp(n.escapeRegExp()+"*$"),""):this.replace(/\s+$/,"")},String.prototype.trimStart=function(n){return n?this.replace(new RegExp("^"+n.escapeRegExp()+"*"),""):this.replace(/^\s+/,"")},String.repeat=function(n,t){for(var r="",i=0;i<t;i++)r+=n;return r},String.prototype.padL=function(n,t){if(!n||n<1)return this;t||(t=" ");var i=n-this.length;return i<1?this.substr(0,n):(String.repeat(t,i)+this).substr(0,n)},String.prototype.padR=function(n,t){if(!n||n<1)return this;t||(t=" ");var i=n-this.length;return i<1&&this.substr(0,n),(this+String.repeat(t,i)).substr(0,n)},String.startsWith=function(n){return n?this.substr(0,n.length)==n:!1},String.prototype.escapeRegExp=function(){return this.replace(/[.*+?^${}()|[\]\/\\]/g,"\\$0")},String.format=function(n){for(var i=0;i<arguments.length;i++)n=n.replace(new RegExp("\\{"+i.toString()+"\\}","g"),arguments[i+1]);return n},String.prototype.format=function(){var t=[this];return n.merge(t,arguments),String.format.apply(this,t)},String.prototype.isNumber=function(){return this.length==0?!1:"0123456789".indexOf(this.charAt(0))>-1?!0:!1},u=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.prototype.formatDate=function(n){var i=this,r,f,t;return n||(n="MM/dd/yyyy"),r=i.getMonth(),f=i.getFullYear(),n.indexOf("yyyy")>-1?n=n.replace("yyyy",f.toString()):n.indexOf("yy")>-1&&(n=n.replace("yy",f.toString().substr(2,2))),n=n.replace("dd",i.getDate().toString().padL(2,"0")),t=i.getHours(),n.indexOf("t")>-1&&(n=t>11?n.replace("t","pm"):n.replace("t","am")),n.indexOf("HH")>-1&&(n=n.replace("HH",t.toString().padL(2,"0"))),n.indexOf("hh")>-1&&(t>12&&(t-=12),t==0&&(t=12),n=n.replace("hh",t.toString().padL(2,"0"))),n.indexOf("mm")>-1&&(n=n.replace("mm",i.getMinutes().toString().padL(2,"0"))),n.indexOf("ss")>-1&&(n=n.replace("ss",i.getSeconds().toString().padL(2,"0"))),n=n.indexOf("MMMM")>-1?n.replace("MMMM",u[r]):n.indexOf("MMM")>-1?n.replace("MMM",u[r].substr(0,3)):n.replace("MM",(r+1).toString().padL(2,"0"))},Number.prototype.formatNumber=function(n,t){var i=this,f=Number.getNumberFormat(),e,c,r,h;if(n=="c")return i=Math.round(i*100)/100,t=t||"$",i=i.toLocaleString(),e=i.split("."),c=e.length>1?e[1]:"",t+e[0]+f.d+c.padR(2,"0");if(n.charAt(0)=="n"){if(n.length==1||(r=n.substr(1),r=parseInt(r),typeof r!="number"))return i.toLocaleString();i=i.toFixed(r);for(var o=i.split(f.d),u=o[0],l=o.length>1?f.d+o[1]:"",s=/(\d+)(\d{3})/;s.test(u);)u=u.replace(s,"$1"+f.c+"$2");return u+l}return n.charAt(0)=="f"?n.length==1?i.toString():(h=n.substr(1),h=parseFloat(r),typeof r!="number")?i.toString():i.toFixed(r):i.toString()},Number.getNumberFormat=function(n){var i=1000.1.toLocaleString(),t={};return t.d=i.charAt(5),t.d.isNumber()&&(t.d=i.charAt(4)),t.c=i.charAt(1),t.c.isNumber()&&(t.c=","),t.s=n||"$",t},registerNamespace=function(n){for(var u=n.split("."),t=window,f="",r,i=0;i<u.length;i++)r=u[i],t=t[r]?t[r]:t[r]={}},getUrlEncodedKey=function(n,t){t||(t=window.location.search);var r=new RegExp("[?|&]"+n+"=(.*?)&"),i=r.exec(t+"&");return!i||i.length<2?"":decodeURIComponent(i[1].replace("+"," "))},setUrlEncodedKey=function(n,t,i){i=i||window.location.search;var r=i+"&",u=new RegExp("[?|&]"+n+"=.*?&");return u.test(r)?r=r.replace(u,"&"+n+"="+encodeURIComponent(t)+"&"):r+=n+"="+encodeURI(t),r=r.trimStart("&").trimEnd("&"),r.charAt(0)=="?"?r:r="?"+r},n.fn.serializeNoViewState=function(){return this.find("input,textarea,select,hidden").not("#__VIEWSTATE,#__EVENTVALIDATION").serialize()},this.assert||(this.assert=function(n,t){n||(t||(t=""),alert("Assert failed\r\n"+(t?t:"")+"\r\n"+(arguments.callee.caller?"in "+arguments.callee.caller.toString():"")))}),o="undefined",this.JSON||(this.JSON={}),function(){function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var c,l,h,a,v=n,s,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i)),typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,s=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,c=0;c<a;c+=1)s[c]=r(c,o)||"null";return h=s.length===0?"[]":n?"[\n"+n+s.join(",\n"+n)+"\n"+v+"]":"["+s.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,c=0;c<a;c+=1)l=t[c],typeof l=="string"&&(h=r(l,o),h&&s.push(f(l)+(n?": ":":")+h));else for(l in o)Object.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&s.push(f(l)+(n?": ":":")+h));return h=s.length===0?"{}":n?"{\n"+n+s.join(",\n"+n)+"\n"+v+"}":"{"+s.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})}),typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}(),this.JSON&&!this.JSON.parseWithDate&&(i=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/,r=/^\/Date\((d|-|.*)\)[\/|\\]$/,JSON.parseWithDate=function(n){try{return JSON.parse(n,function(n,t){var u,f;if(typeof t=="string"){if(u=i.exec(t),u)return new Date(Date.UTC(+u[1],+u[2]-1,+u[3],+u[4],+u[5],+u[6]));if(u=r.exec(t),u)return f=u[1].split(/[-+,.]/),new Date(f[0]?+f[0]:0-+f[1])}return t})}catch(u){throw new Error("JSON content could not be parsed");return null}},JSON.stringifyWcf=function(n){return JSON.stringify(n,function(n,t){var r,u;return typeof t=="string"&&(r=i.exec(t),r)?u="/Date("+ +new Date(Date.UTC(+r[1],+r[2]-1,+r[3],+r[4],+r[5],+r[6]))+")/":t})},JSON.dateStringToDate=function(n){var t=i.exec(n),u;return t?new Date(Date.UTC(+t[1],+t[2]-1,+t[3],+t[4],+t[5],+t[6])):(t=r.exec(n),t)?(u=t[1].split(/[-,.]/),new Date(+u[0])):null})})(jQuery)